.attachment-multiple{ class: class_names("fr-downloads-group": view_as == :download, "destroyable": user_can_destroy?) }
  = template

  - if show_hint?
    %p.fr-hint-text.fr-mb-1w{ id: describedby_hint_id }
      - if max_file_size.present?
        = t('.max_file_size', max_file_size: number_to_human_size(max_file_size))
      - if allowed_formats.present?
        = t('.allowed_formats', formats: allowed_formats.join(', '))

  - if @attachments.size >= 1
    %ul.fr-my-1v
      - each_attachment do |attachment, index|
        %li{ id: dom_id(attachment) }
          = render Attachment::EditComponent.new(champ:, attached_file:, attachment:, index:, view_as:, user_can_destroy:, form_object_name:, aria_labelledby:, parent_hint_id: describedby_hint_id)

  %div{ id: empty_component_id, data: { turbo_force: :server } }
    = render Attachment::EditComponent.new(champ:, as_multiple: champ.nil?, attached_file:, attachment: nil, index: attachments_size, user_can_destroy:, form_object_name:, max: @max, aria_labelledby:, parent_hint_id: describedby_hint_id)

  // single poll and refresh message for all attachments
  = render Attachment::PendingPollComponent.new(attachments: attachments, poll_url:, context: poll_context)
